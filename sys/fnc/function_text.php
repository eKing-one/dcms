<?php
// 该脚本的主要功能是实现俄文与拉丁字母之间的双向转换，以及简单的字符串过滤处理。

// -------------------------
// Функция retranslit($in)
// -------------------------
// 功能：将俄文字母转换为对应的拉丁字母。
// - 使用两个数组 $trans1 和 $trans2 进行逐字符替换。
// - 特殊字符（如空格和引号）会被替换为下划线 `_`。
// - 用途：将俄文字符串转换为适合在文件名、URL 或数据库中使用的格式。
function retranslit($in) {
	$trans1= array("'",'`',',',' ',"Ё","Ж","Ч","Ш","Щ","Э","Ю","Я","ё","ж","ч","ш","щ","э","ю","я","А","Б","В","Г","Д","Е","З","И","Й","К","Л","М","Н","О","П","Р","С","Т","У","Ф","Х","Ц","Ь","Ы","а","б","в","г","д","е","з","и","й","к","л","м","н","о","п","р","с","т","у","ф","х","ц","ь","ы");
	$trans2= array('_','_','_','_',"JO","ZH","CH","SH","SCH","Je","Jy","Ja","jo","zh","ch","sh","sch","je","jy","ja","A","B","V","G","D","E","Z","I","J","K","L","M","N","O","P","R","S","T","U","F","H","C","","Y","a","b","v","g","d","e","z","i","j","k","l","m","n","o","p","r","s","t","u","f","h","c","","y");
	return str_replace($trans1,$trans2,$in);
}

// -------------------------
// Функция text($str)
// -------------------------
// 功能：对字符串进行过滤和安全处理。
// - 使用 htmlspecialchars() 转义 HTML 特殊字符，防止 XSS 攻击。
// - 使用 stripcslashes() 去除字符串中的反斜杠。
// - 用途：对用户输入的数据进行安全过滤。
function text($str) {
	if ($str === NULL) return ''; // 将 NULL 转为空字符串
	return stripcslashes(htmlspecialchars($str));
}

// -------------------------
// Функция translit($in)
// -------------------------
// 功能：将拉丁字母转换为对应的俄文字母。
// - 与 retranslit() 功能相反，逐字符将拉丁字母映射回俄文字母。
// - 用途：将拉丁字母还原为俄文（如展示原始内容或恢复被转码的数据）。
function translit($in) {
	$trans1= array("JO","ZH","CH","SH","SCH","JE","JY","JA","jo","zh","ch","sh","sch","je","jy","ja","A","B","V","G","D","E","Z","I","J","K","L","M","N","O","P","R","S","T","U","F","H","C","'","Y","a","b","v","g","d","e","z","i","j","k","l","m","n","o","p","r","s","t","u","f","h","c","'","y");
	$trans2= array("Ё","Ж","Ч","Ш","Щ","Э","Ю","Я","ё","ж","ч","ш","щ","э","ю","я","А","Б","В","Г","Д","Е","З","И","Й","К","Л","М","Н","О","П","Р","С","Т","У","Ф","Х","Ц","Ь","Ы","а","б","в","г","д","е","з","и","й","к","л","м","н","о","п","р","с","т","у","ф","х","ц","ь","ы");
	return str_replace($trans1,$trans2,$in);
}

// -------------------------
// 脚本用途说明：
// 1. 俄文与拉丁字母之间的双向转换（如文件名、URL 或存储适配）。
// 2. 对用户输入进行过滤处理，确保数据安全。
// 3. 可用于文本转码、文件命名规范化或防止 XSS 攻击。